{"map":"{\"version\":3,\"sources\":[\"D:\\\\Tail\\\\Test\\\\Data-Binding\\\\src\\\\observer\\\\observer.js\",\"D:\\\\Tail\\\\Test\\\\Data-Binding\\\\src\\\\watcher\\\\watcher.js\",\"D:\\\\Tail\\\\Test\\\\Data-Binding\\\\src\\\\index.js\",\"D:\\\\Tail\\\\Test\\\\Data-Binding\\\\index.js\"],\"names\":[\"Observer\",\"data\",\"this\",\"walk\",\"observer\",\"val\",\"Dep\",\"subs\",\"Watcher\",\"vm\",\"exp\",\"fn\",\"get\",\"prototype\",\"Object\",\"keys\",\"forEach\",\"key\",\"defineReactive\",\"dep\",\"defineProperty\",\"enumerable\",\"configurable\",\"target\",\"addSub\",\"[object Object]\",\"newVal\",\"notify\",\"sub\",\"push\",\"updata\",\"run\",\"oldVal\",\"call\",\"watcher\",\"Binding\",\"el\",\"proxyKeys\",\"innerHTML\",\"self\",\"set\",\"src\",\"document\",\"body\",\"selfVue\",\"a\",\"b\",\"c\",\"d\",\"e\",\"getElementById\",\"setTimeout\"],\"mappings\":\"8DAAA,SAAAA,EAAAC,GACAC,KAAAD,KAAAA,EACAC,KAAAC,KAAAF,GAwBA,SAAAG,EAAAC,GACA,GAAAA,GAAA,iBAAAA,EAGA,OAAA,IAAAL,EAAAK,GAGA,SAAAC,IACAJ,KAAAK,QChCA,SAAAC,EAAAC,EAAAC,EAAAC,GACAT,KAAAO,GAAAA,EACAP,KAAAQ,IAAAA,EACAR,KAAAS,GAAAA,EACAT,KAAAG,IAAAH,KAAAU,aDFAZ,EAAAa,UAAAV,KAAA,SAAAF,GACAa,OAAAC,KAAAd,GAAAe,QAAAC,IACAf,KAAAgB,eAAAjB,EAAAgB,EAAAhB,EAAAgB,OAGAjB,EAAAa,UAAAK,eAAA,SAAAjB,EAAAgB,EAAAZ,GACA,IAAAc,EAAA,IAAAb,EACAF,EAAAC,GACAS,OAAAM,eAAAnB,EAAAgB,GACAI,YAAA,EACAC,cAAA,EACAV,IAAA,KACAN,EAAAiB,QAAAJ,EAAAK,OAAAlB,EAAAiB,QACAlB,GAEAoB,IAAAC,GACArB,IAAAqB,IACArB,EAAAqB,EACAP,EAAAQ,cAcArB,EAAAO,UAAAW,OAAA,SAAAI,GACA1B,KAAAK,KAAAsB,KAAAD,IAEAtB,EAAAO,UAAAc,OAAA,WACAzB,KAAAK,KAAAS,QAAAY,IACAA,EAAAE,YAGAxB,EAAAiB,OAAA,KCpCAf,EAAAK,UAAAiB,OAAA,WACA5B,KAAA6B,OAEAvB,EAAAK,UAAAkB,IAAA,WACA,IAAA1B,EAAAH,KAAAO,GAAAR,KAAAC,KAAAQ,KACAsB,EAAA9B,KAAAG,IACAA,IAAA2B,IACA9B,KAAAG,IAAAA,EACAH,KAAAS,GAAAsB,KAAA/B,KAAAO,GAAAJ,EAAA2B,KAGAxB,EAAAK,UAAAD,IAAA,WACAN,EAAAiB,OAAArB,KACA,IAAAG,EAAAH,KAAAO,GAAAR,KAAAC,KAAAQ,KAEA,OADAJ,EAAAiB,OAAA,KACAlB,GAGA,IAAA6B,EAAA,ECvBA,SAAAC,EAAAlC,EAAAmC,EAAA1B,GACAR,KAAAO,GAAAP,KACAA,KAAAD,KAAAA,EAEAa,OAAAC,KAAAb,KAAAD,MAAAe,QAAAC,IACAf,KAAAmC,UAAApB,KAEAb,EAAAH,GACAmC,EAAAE,UAAApC,KAAAD,KAAAS,GACA,IAAAwB,EAAAhC,KAAAQ,EAAA,SAAAL,GACA+B,EAAAE,UAAAjC,IAGA8B,EAAAtB,UAAAwB,UAAA,SAAApB,GACA,IAAAsB,EAAArC,KACAY,OAAAM,eAAAlB,KAAAe,GACAI,YAAA,EACAC,cAAA,EACAV,IAAA,WACA,OAAA2B,EAAAtC,KAAAgB,IAEAuB,IAAA,SAAAd,GACAa,EAAAtC,KAAAgB,GAAAS,MAKA,IAAAe,EAAA,EC5BAC,SAAAC,KAAAL,UAAA,qDAEA,IAcAM,EAAA,IAAAH,GAbAI,EAAA,EACAC,EAAA,EACAC,GACAC,IAEAC,EAAA,MAMAP,SAAAQ,eAAA,QAEA,KAEAC,WAAA,IAAAP,EAAAC,EAAA,IAAA\",\"sourcesContent\":[\"function Observer (data) {\\r\\n    this.data = data;\\r\\n    this.walk(data);\\r\\n}\\r\\nObserver.prototype.walk = function (data) {\\r\\n    Object.keys(data).forEach((key) => {\\r\\n        this.defineReactive(data, key, data[key]);\\r\\n    })\\r\\n}\\r\\nObserver.prototype.defineReactive = function (data, key, val) {\\r\\n    var dep = new Dep();\\r\\n    var childObj = observer(val);\\r\\n    Object.defineProperty(data, key, {\\r\\n        enumerable: true,\\r\\n        configurable: true,\\r\\n        get () {\\r\\n            if (Dep.target) dep.addSub(Dep.target);\\r\\n            return val;\\r\\n        },\\r\\n        set (newVal) {\\r\\n            if (val === newVal) return;\\r\\n            val = newVal;\\r\\n            dep.notify();\\r\\n        }\\r\\n    })\\r\\n}\\r\\nfunction observer (val) {\\r\\n    if (!val || typeof val !== 'object') {\\r\\n        return;\\r\\n    }\\r\\n    return new Observer(val);\\r\\n}\\r\\n\\r\\nfunction Dep () {\\r\\n    this.subs = [];\\r\\n}\\r\\nDep.prototype.addSub = function (sub) {\\r\\n    this.subs.push(sub);\\r\\n}\\r\\nDep.prototype.notify = function () {\\r\\n    this.subs.forEach((sub) => {\\r\\n        sub.updata();\\r\\n    })\\r\\n}\\r\\nDep.target = null;\\r\\n\\r\\nexport { observer, Dep };\",\"import { Dep } from '../observer/observer';\\r\\n\\r\\nfunction Watcher (vm, exp, fn) {\\r\\n    this.vm = vm;\\r\\n    this.exp = exp;\\r\\n    this.fn = fn;\\r\\n    this.val = this.get();\\r\\n}\\r\\nWatcher.prototype.updata = function () {\\r\\n    this.run();\\r\\n}\\r\\nWatcher.prototype.run = function () {\\r\\n    var val = this.vm.data[this.exp];\\r\\n    var oldVal = this.val;\\r\\n    if (val !== oldVal) {\\r\\n        this.val = val;\\r\\n        this.fn.call(this.vm, val, oldVal);\\r\\n    }\\r\\n}\\r\\nWatcher.prototype.get = function () {\\r\\n    Dep.target = this;\\r\\n    var val = this.vm.data[this.exp];\\r\\n    Dep.target = null;\\r\\n    return val;\\r\\n}\\r\\n\\r\\nexport default Watcher;\",\"import { observer } from \\\"./observer/observer\\\";\\r\\nimport Watcher from './watcher/watcher';\\r\\n\\r\\nfunction Binding(data, el, exp) {\\r\\n    this.vm = this;\\r\\n    this.data = data;\\r\\n\\r\\n    Object.keys(this.data).forEach( (key) => {\\r\\n        this.proxyKeys(key);\\r\\n    });\\r\\n    observer(data);\\r\\n    el.innerHTML = this.data[exp];\\r\\n    new Watcher(this, exp, function (val) {\\r\\n        el.innerHTML = val;\\r\\n    })\\r\\n}\\r\\nBinding.prototype.proxyKeys = function (key) {\\r\\n    var self = this;\\r\\n    Object.defineProperty(this, key, {\\r\\n        enumerable: false,\\r\\n        configurable: true,\\r\\n        get: function proxyGetter() {\\r\\n            return self.data[key];\\r\\n        },\\r\\n        set: function proxySetter(newVal) {\\r\\n            self.data[key] = newVal;\\r\\n        }\\r\\n    })\\r\\n}\\r\\n\\r\\nexport default Binding;\",\"import Binding from './src/index';\\r\\n\\r\\ndocument.body.innerHTML = '<span q-text=\\\"value\\\" id=\\\"span\\\">{{ data.a }}</span>'\\r\\n\\r\\nvar data = {\\r\\n    a: 1,\\r\\n    b: 2,\\r\\n    c: {\\r\\n        d: [\\r\\n            {\\r\\n                e: 3\\r\\n            }\\r\\n        ]\\r\\n    }\\r\\n}\\r\\n\\r\\nvar span = document.getElementById('span');\\r\\n\\r\\nvar selfVue = new Binding(data, span, \\\"a\\\");\\r\\n\\r\\nsetTimeout(() => selfVue.a = 200, 2000)\"]}","code":"webpackHotUpdate(0,{\"./index.js\":function(t,e,n){\"use strict\";function i(t){this.data=t,this.walk(t)}function a(t){if(t&&\"object\"==typeof t)return new i(t)}function o(){this.subs=[]}function s(t,e,n){this.vm=t,this.exp=e,this.fn=n,this.val=this.get()}n.r(e),i.prototype.walk=function(t){Object.keys(t).forEach(e=>{this.defineReactive(t,e,t[e])})},i.prototype.defineReactive=function(t,e,n){var i=new o;a(n);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:()=>(o.target&&i.addSub(o.target),n),set(t){n!==t&&(n=t,i.notify())}})},o.prototype.addSub=function(t){this.subs.push(t)},o.prototype.notify=function(){this.subs.forEach(t=>{t.updata()})},o.target=null,s.prototype.updata=function(){this.run()},s.prototype.run=function(){var t=this.vm.data[this.exp],e=this.val;t!==e&&(this.val=t,this.fn.call(this.vm,t,e))},s.prototype.get=function(){o.target=this;var t=this.vm.data[this.exp];return o.target=null,t};var r=s;function u(t,e,n){this.vm=this,this.data=t,Object.keys(this.data).forEach(t=>{this.proxyKeys(t)}),a(t),e.innerHTML=this.data[n],new r(this,n,function(t){e.innerHTML=t})}u.prototype.proxyKeys=function(t){var e=this;Object.defineProperty(this,t,{enumerable:!1,configurable:!0,get:function(){return e.data[t]},set:function(n){e.data[t]=n}})};var c=u;document.body.innerHTML='<span q-text=\"value\" id=\"span\">{{ data.a }}</span>';var h=new c({a:1,b:2,c:{d:[{e:3}]}},document.getElementById(\"span\"),\"a\");setTimeout(()=>h.a=200,2e3)}});","extractedComments":[]}