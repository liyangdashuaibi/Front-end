{"map":"{\"version\":3,\"sources\":[\"D:\\\\Tail\\\\Test\\\\Data-Binding\\\\src\\\\observer\\\\observer.js\",\"D:\\\\Tail\\\\Test\\\\Data-Binding\\\\src\\\\watcher\\\\watcher.js\",\"D:\\\\Tail\\\\Test\\\\Data-Binding\\\\src\\\\index.js\",\"D:\\\\Tail\\\\Test\\\\Data-Binding\\\\index.js\"],\"names\":[\"Observer\",\"data\",\"this\",\"walk\",\"observer_Dep\",\"subs\",\"Watcher\",\"vm\",\"exp\",\"fn\",\"val\",\"get\",\"prototype\",\"Object\",\"keys\",\"forEach\",\"defineReactive\",\"key\",\"dep\",\"observe\",\"defineProperty\",\"enumerable\",\"configurable\",\"target\",\"addSub\",\"[object Object]\",\"newVal\",\"notify\",\"sub\",\"push\",\"updata\",\"run\",\"oldVal\",\"call\",\"Dep\",\"watcher\",\"Binding\",\"el\",\"proxyKeys\",\"observer\",\"innerHTML\",\"self\",\"set\",\"selfVue\",\"a\",\"b\",\"c\",\"d\",\"e\",\"document\",\"getElementById\",\"setTimeout\"],\"mappings\":\"8DAAA,SAAAA,EAAAC,GACAC,KAAAD,KAAAA,EACAC,KAAAC,KAAAF,GA+BA,SAAAG,IACAF,KAAAG,QClCA,SAAAC,EAAAC,EAAAC,EAAAC,GACAP,KAAAK,GAAAA,EACAL,KAAAM,IAAAA,EACAN,KAAAO,GAAAA,EACAP,KAAAQ,IAAAR,KAAAS,aDAAX,EAAAY,UAAAT,KAAA,WACAU,OAAAC,KAAAb,MAAAc,QAAA,KACAb,KAAAc,eAAAf,KAAAgB,IAAAhB,KAAAgB,SAGAjB,EAAAY,UAAAI,eAAA,SAAAf,EAAAgB,EAAAP,GACA,IAAAQ,EAAA,IAAAA,EACAC,QAAAT,GACAG,OAAAO,eAAAnB,EAAAgB,GACAI,YAAA,EACAC,cAAA,EACAX,IAAA,KACAP,EAAAmB,QAAAL,EAAAM,OAAApB,EAAAmB,QACAb,GAEAe,IAAAC,GACAhB,IAAAgB,IACAhB,EAAAgB,EACAR,EAAAS,cAcAvB,EAAAQ,UAAAY,OAAA,SAAAI,GACA1B,KAAAG,KAAAwB,KAAAD,IAEAxB,EAAAQ,UAAAe,OAAA,WACAzB,KAAAG,KAAAU,QAAAa,IACAA,EAAAE,YAGA1B,EAAAmB,OAAA,KCtCAjB,EAAAM,UAAAkB,OAAA,WACA5B,KAAA6B,OAEAzB,EAAAM,UAAAmB,IAAA,WACA,IAAArB,EAAAR,KAAAK,GAAAN,KAAAC,KAAAM,KACAwB,EAAA9B,KAAAQ,IACAA,IAAAsB,IACA9B,KAAAQ,IAAAA,EACAR,KAAAO,GAAAwB,KAAA/B,KAAAK,GAAAG,EAAAsB,KAGA1B,EAAAM,UAAAD,IAAA,WACAuB,IAAAX,OAAArB,KACA,IAAAQ,EAAAR,KAAAK,GAAAN,KAAAC,KAAAM,KAEA,OADA0B,IAAAX,OAAA,KACAb,GAGA,IAAAyB,EAAA,ECrBA,SAAAC,EAAAnC,EAAAoC,EAAA7B,GACAN,KAAAK,GAAAL,KACAA,KAAAD,KAAAA,EAEAY,OAAAC,KAAAZ,KAAAD,MAAAc,QAAAE,IACAf,KAAAoC,UAAArB,KFkBA,SAAAP,GACA,GAAAA,GAAA,iBAAAA,EAGA,IAAAV,EAAAU,GEpBA6B,CAAAtC,GACAoC,EAAAG,UAAAtC,KAAAD,KAAAO,GACA,IAAA2B,EAAAjC,KAAAM,EAAA,SAAAE,GACA2B,EAAAG,UAAA9B,IAGA0B,EAAAxB,UAAA0B,UAAA,SAAArB,GACA,IAAAwB,EAAAvC,KACAW,OAAAO,eAAAlB,KAAAe,GACAI,YAAA,EACAC,cAAA,EACAX,IAAA,WACA,OAAA8B,EAAAxC,KAAAgB,IAEAyB,IAAA,SAAAhB,GACAe,EAAAxC,KAAAgB,GAAAS,MAKA,ICdAiB,EAAA,IDcA,GC3BAC,EAAA,EACAC,EAAA,EACAC,GACAC,IAEAC,EAAA,MAMAC,SAAAC,eAAA,QAEA,KAEAC,WAAA,IAAAR,EAAAC,EAAA,IAAA\",\"sourcesContent\":[\"function Observer (data) {\\r\\n    this.data = data;\\r\\n    this.walk(data);\\r\\n}\\r\\nObserver.prototype.walk = function () {\\r\\n    Object.keys(data).forEach(() => {\\r\\n        this.defineReactive(data, key, data[key]);\\r\\n    })\\r\\n}\\r\\nObserver.prototype.defineReactive = function (data, key, val) {\\r\\n    var dep = new dep();\\r\\n    var childObj = observe(val);\\r\\n    Object.defineProperty(data, key, {\\r\\n        enumerable: true,\\r\\n        configurable: true,\\r\\n        get () {\\r\\n            if (Dep.target) dep.addSub(Dep.target);\\r\\n            return val;\\r\\n        },\\r\\n        set (newVal) {\\r\\n            if (val === newVal) return;\\r\\n            val = newVal;\\r\\n            dep.notify();\\r\\n        }\\r\\n    })\\r\\n}\\r\\nfunction observer (val) {\\r\\n    if (!val || typeof val !== 'object') {\\r\\n        return;\\r\\n    }\\r\\n    return new Observer(val);\\r\\n}\\r\\n\\r\\nfunction Dep () {\\r\\n    this.subs = [];\\r\\n}\\r\\nDep.prototype.addSub = function (sub) {\\r\\n    this.subs.push(sub);\\r\\n}\\r\\nDep.prototype.notify = function () {\\r\\n    this.subs.forEach((sub) => {\\r\\n        sub.updata();\\r\\n    })\\r\\n}\\r\\nDep.target = null;\\r\\n\\r\\nexport { observer, Dep };\",\"function Watcher (vm, exp, fn) {\\r\\n    this.vm = vm;\\r\\n    this.exp = exp;\\r\\n    this.fn = fn;\\r\\n    this.val = this.get();\\r\\n}\\r\\nWatcher.prototype.updata = function () {\\r\\n    this.run();\\r\\n}\\r\\nWatcher.prototype.run = function () {\\r\\n    var val = this.vm.data[this.exp];\\r\\n    var oldVal = this.val;\\r\\n    if (val !== oldVal) {\\r\\n        this.val = val;\\r\\n        this.fn.call(this.vm, val, oldVal);\\r\\n    }\\r\\n}\\r\\nWatcher.prototype.get = function () {\\r\\n    Dep.target = this;\\r\\n    var val = this.vm.data[this.exp];\\r\\n    Dep.target = null;\\r\\n    return val;\\r\\n}\\r\\n\\r\\nexport default Watcher;\",\"import { observer } from \\\"./observer/observer\\\";\\r\\nimport Watcher from './watcher/watcher';\\r\\n\\r\\nfunction Binding(data, el, exp) {\\r\\n    this.vm = this;\\r\\n    this.data = data;\\r\\n\\r\\n    Object.keys(this.data).forEach( (key) => {\\r\\n        this.proxyKeys(key);\\r\\n    });\\r\\n    observer(data);\\r\\n    el.innerHTML = this.data[exp];\\r\\n    new Watcher(this, exp, function (val) {\\r\\n        el.innerHTML = val;\\r\\n    })\\r\\n}\\r\\nBinding.prototype.proxyKeys = function (key) {\\r\\n    var self = this;\\r\\n    Object.defineProperty(this, key, {\\r\\n        enumerable: false,\\r\\n        configurable: true,\\r\\n        get: function proxyGetter() {\\r\\n            return self.data[key];\\r\\n        },\\r\\n        set: function proxySetter(newVal) {\\r\\n            self.data[key] = newVal;\\r\\n        }\\r\\n    })\\r\\n}\\r\\n\\r\\nexport default Binding;\",\"import Binding from './src/index';\\r\\n\\r\\nvar data = {\\r\\n    a: 1,\\r\\n    b: 2,\\r\\n    c: {\\r\\n        d: [\\r\\n            {\\r\\n                e: 3\\r\\n            }\\r\\n        ]\\r\\n    }\\r\\n}\\r\\n\\r\\nvar span = document.getElementById('span');\\r\\n\\r\\nvar selfVue = new Binding(data, span, \\\"a\\\");\\r\\n\\r\\nsetTimeout(() => selfVue.a = 200, 2000)\"]}","code":"webpackHotUpdate(0,{\"./index.js\":function(t,e,n){\"use strict\";function i(t){this.data=t,this.walk(t)}function a(){this.subs=[]}function o(t,e,n){this.vm=t,this.exp=e,this.fn=n,this.val=this.get()}n.r(e),i.prototype.walk=function(){Object.keys(data).forEach(()=>{this.defineReactive(data,key,data[key])})},i.prototype.defineReactive=function(t,e,n){var i=new i;observe(n);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:()=>(a.target&&i.addSub(a.target),n),set(t){n!==t&&(n=t,i.notify())}})},a.prototype.addSub=function(t){this.subs.push(t)},a.prototype.notify=function(){this.subs.forEach(t=>{t.updata()})},a.target=null,o.prototype.updata=function(){this.run()},o.prototype.run=function(){var t=this.vm.data[this.exp],e=this.val;t!==e&&(this.val=t,this.fn.call(this.vm,t,e))},o.prototype.get=function(){Dep.target=this;var t=this.vm.data[this.exp];return Dep.target=null,t};var s=o;function r(t,e,n){this.vm=this,this.data=t,Object.keys(this.data).forEach(t=>{this.proxyKeys(t)}),function(t){if(t&&\"object\"==typeof t)new i(t)}(t),e.innerHTML=this.data[n],new s(this,n,function(t){e.innerHTML=t})}r.prototype.proxyKeys=function(t){var e=this;Object.defineProperty(this,t,{enumerable:!1,configurable:!0,get:function(){return e.data[t]},set:function(n){e.data[t]=n}})};var u=new r({a:1,b:2,c:{d:[{e:3}]}},document.getElementById(\"span\"),\"a\");setTimeout(()=>u.a=200,2e3)}});","extractedComments":[]}