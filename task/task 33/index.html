<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <style>
            table{
                border: 2px solid #000;
                border-collapse: collapse;
            }
            td{
                width: 45px;
                height: 45px;
                border: 1px solid grey;
                padding: 0;
            }
            #transverse{
                margin-left: 13px;
                display: flex;
            }
            #transverse span{
                display: block;
                width: 45px;
                text-align: center;
                border-left: 1px solid #fff;
                font-weight: bold;
            }
            #vertical{
                float: left;
                margin-right: 2px;
            }
            #vertical div{
                display: flex;
                align-items: center;
                justify-content: center;
                height: 45px;
                border-top: 1px solid #fff;
                font-weight: bold;
            }
            #g{
                margin: 10px 0 0 50px;
            }
            #g input{
                margin-left: 170px;
            }
            #input{
                margin: 10px 0 0 80px;
            }
            #input input{
                margin-left: 40px;
            }
            #box{
                width: 100%;
                height: 100%;
                background-color: red;
                display: flex;
            }
        </style>
    </head>
    <body>
        <div id="transverse">
            <span>0</span>
            <span>1</span>
            <span>2</span>
            <span>3</span>
            <span>4</span>
            <span>5</span>
            <span>6</span>
            <span>7</span>
            <span>8</span>
            <span>9</span>
        </div>
        <div id="vertical">
            <div>0</div>
            <div>1</div>
            <div>2</div>
            <div>3</div>
            <div>4</div>
            <div>5</div>
            <div>6</div>
            <div>7</div>
            <div>8</div>
            <div>9</div>
        </div>
        <table id="tab">
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
        </table>
        <div id="g">
            <input type="button" id="go" value="Go~">
        </div>
        <div id="input">
            <input type="button" id="left" value="Left~">
            <input type="button" id="back" value="Back~">
            <input type="button" id="right" value="Right~">
        </div>

        <script>
            var $ = function(id){
                return document.getElementById(id);
            }
            var tab = $('tab');
            function coordinate(){
                var arr = [];
                var tr = tab.getElementsByTagName('tr');
                for (var i = 0; i < tr.length; i ++){
                    var ar = [];
                    var td = tr[i].getElementsByTagName('td');
                    for (var j = 0; j < td.length; j ++){
                        ar.push(td[j]);
                    }
                    arr.push(ar);
                }
                return arr;
            }
            function Box(){
                this.arr = coordinate();
                this.x = Math.round(Math.random() * 9);
                this.y = Math.round(Math.random() * 9);
                this.justifyContent = 0;
                this.alignItems = 0;
                this.div = null;
                this.box = null;
                this.width = null;
                this.height = null;
                this.align = null;
            }
            Box.prototype.width_height = function(){
                var u = Math.round(Math.random() * 3);
                switch (u){
                    case 0:
                        this.width = '100%';
                        this.height = '20%';
                        break;
                    case 1:
                        this.width = '20%';
                        this.height = '100%';
                        this.box.style.justifyContent = 'flex-end';
                        this.justifyContent = 1;
                        break;
                    case 2:
                        this.width = '100%';
                        this.height = '20%';
                        this.box.style.alignItems = 'flex-end';
                        this.alignItems = 1;
                        break;
                    case 3:
                        this.width = '20%';
                        this.height = '100%';
                        break;
                }
            }
            Box.prototype.current_coordinates = function(){
                var box = document.createElement('div');
                box.id = 'box';
                this.box = box;
                var div = document.createElement('div');
                this.div = div;
                this.width_height();
                div.style.width = this.width;
                div.style.height = this.height;
                div.style.backgroundColor = 'blue';
                box.appendChild(div);
                this.arr[this.x][this.y].appendChild(box);
            }
            Box.prototype.go = function(){
                if (this.height == '100%'){
                    if (this.justifyContent == 1){
                        this.arr[this.x][this.y+1].appendChild(this.box);
                        this.y ++;
                    }
                    else
                    {
                        this.arr[this.x][this.y-1].appendChild(this.box);
                        this.y --;
                    }
                }
                else 
                if(this.width == '100%'){
                    if (this.alignItems == 1){
                        this.arr[this.x+1][this.y].appendChild(this.box);
                        this.x ++;
                    }
                    else
                    {
                        this.arr[this.x-1][this.y].appendChild(this.box);
                        this.x --;
                    }
                }
            }
            Box.prototype.back =function(){
                if (this.height == '100%'){
                    if (this.justifyContent == 1){
                        this.box.style.justifyContent = '';
                        this.justifyContent = 0;
                    }
                    else
                    {
                        this.box.style.justifyContent = 'flex-end';
                        this.justifyContent = 1;
                    }
                }
                else 
                if(this.width == '100%'){
                    if (this.alignItems == 1){
                        this.box.style.alignItems = '';
                        this.alignItems = 0;
                    }
                    else
                    {
                        this.box.style.alignItems = 'flex-end';
                        this.alignItems = 1;
                    }
                }
            }
            Box.prototype.left = function(){
                if (this.height == '100%'){
                    if (this.justifyContent == 1){
                        this.box.style.alignItems = '';
                        this.alignItems = 0;
                    }
                    else
                    {
                        this.box.style.alignItems = 'flex-end';
                        this.alignItems = 1;
                    }
                }
                if (this.width == '100%'){
                    if (this.alignItems == 1){
                        this.box.style.justifyContent = 'flex-end';
                        this.justifyContent = 1;
                    }
                    else
                    {
                        this.box.style.justifyContent = '';
                        this.justifyContent = 0;
                    }
                }
                var l = this.height;
                this.height = this.width;
                this.width = l
                this.div.style.width = this.width;
                this.div.style.height = this.height;
            }
            Box.prototype.right = function(){
                if (this.height == '100%'){
                    if (this.justifyContent == 1){
                        this.box.style.alignItems = 'flex-end';
                        this.alignItems = 1;
                    }
                    else
                    {
                        this.box.style.alignItems = '';
                        this.alignItems = 0;
                    }
                }
                if (this.width == '100%'){
                    if (this.alignItems == 1){
                        this.box.style.justifyContent = '';
                        this.justifyContent = 0;
                    }
                    else
                    {
                        this.box.style.justifyContent = 'flex-end';
                        this.justifyContent = 1;
                    }
                }
                var l = this.height;
                this.height = this.width;
                this.width = l
                this.div.style.width = this.width;
                this.div.style.height = this.height;
            }
            var b = new Box();
            b.current_coordinates();

            $('go').onclick = function(){
                b.go();
            };
            $('back').onclick = function(){
                b.back();
            }
            $('left').onclick = function(){
                b.left();
            }
            $('right').onclick = function(){
                b.right();
            }
        </script>
    </body>
</html>